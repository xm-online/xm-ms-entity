---
types:
    - key: XM
      #language=JSON
      dataSpec: |
          {
            "type": "object",
            "properties": {
              "uaa": {
                "$ref": "#/xmEntityDefinition/Order"
              }
            },
            "xmEntityDefinition": {
              "Order": {
                "type": "object",
                "properties": {
                  "addresses": {
                      "type": "array",
                      "items": {
                          "$ref": "#/xmEntityDefinition/Address",
                          "label": {}
                      }
                  },
                  "price": {
                      "type": "number"
                  }
                }
              },
              "Address": {
                "type": "object",
                "properties": {
                  "city": {
                    "type": "string"
                  },
                  "cityType": {
                    "$ref": "#/xmEntityDefinition/CityType"
                  },
                  "street": {
                    "type": "string"
                  },
                  "house": {
                    "type": "string"
                  }
                }
              },
              "CityType": {
                "$schema": "http://json-schema.org/draft-07/schema#",
                "type": "string",
                "enum": [
                  "CITY",
                  "VILLAGE"
                ]
              }
            }
          }


definitions:
- key: Order
  # language=JSON
  value: |
      {
        "type": "object",
        "properties": {
          "addresses": {
            "type": "array",
            "items": {
              "$ref": "#/xmEntityDefinition/Address",
              "label": {}
            }
          },
          "price": {
            "type": "number"
          }
        }
      }
- key: Address
  # language=JSON
  value: |
      {
        "type": "object",
        "properties": {
          "city": {
            "type": "string"
          },
          "cityType": {
            "$ref": "#/xmEntityDefinition/CityType"
          },
          "street": {
            "type": "string"
          },
          "house": {
            "type": "string"
          }
        }
      }
- key: CityType
  # language=JSON
  value: |-
      {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "type": "string",
        "enum": [
            "CITY",
            "VILLAGE"
        ]
      }
